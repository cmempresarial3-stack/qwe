ASSUNTO: Urgente ‚Äî continuar desenvolvimento e corrigir crash final do app Verso Di√°rio (entregar c√≥digo 100% pronto para gerar APK local)

Ol√° ‚Äî vou subir o ZIP do projeto Verso Di√°rio. Preciso que atuem como arquiteto de software + engenheiro s√™nior React Native / Expo e continuem o desenvolvimento exatamente de onde parou, sem quebrar nada existente, at√© entregar o c√≥digo final pronto para gerar o APK localmente (Windows) sem crashes nem bugs.

Abaixo explico como era o app, o que j√° fizemos, o erro atual e o que precisa ser feito.

1) COMO ERA O APP (vis√£o geral)

O app √© a vers√£o mobile do site/vers√£o web Verso Di√°rio. Deve preservar identidade visual (cores, √≠cones, emojis üïäÔ∏è), layout adaptado para mobile e funcionalidades da web. Principais m√≥dulos previstos: Verso do Dia, Devocionais, B√≠blia (ACF) com TTS, Hin√°rio com player, Anota√ß√µes, Calend√°rio, Alarmes/Notifica√ß√µes, Loja, Perfil/Configura√ß√µes, Favoritos.

2) O QUE J√Å FOI FEITO (estado atual do reposit√≥rio)

‚úÖ Imports corrigidos: todos os @/ foram substitu√≠dos por caminhos relativos (resolvido para build nativo).
‚úÖ Estrutura de pastas organizada: app/, components/, contexts/, data/, assets/, utils/.
‚úÖ Assets criados: icon.png, splash.png, background gradient, sons iniciais (bells, chimes, piano etc.).
‚úÖ Telas e componentes implementados (parcialmente): navega√ß√£o por tabs, bible-reader.tsx, app/(tabs)/bible.tsx, app/(tabs)/hymnal.tsx, hymn-player.tsx, contextos principais e AsyncStorage para favoritos.
‚úÖ Metro bundler corrigido e babel-plugin-module-resolver instalado quando faltava; babel.config.js j√° configurado.
‚úÖ Pr√©-build (npx expo prebuild) e cria√ß√£o da pasta android/ executados com sucesso.
‚úÖ assembleRelease chegou a rodar (APK gerado), mas crasha em runtime ap√≥s splash.

3) ERRO ATUAL

O APK abre, mostra splash, e fecha sozinho (erro JS em runtime).

Testes realizados: npm install --legacy-peer-deps, npx expo prebuild --clean, cd android && .\gradlew clean && .\gradlew assembleRelease.

Logs anteriores mostravam ‚ÄúCannot find module 'babel-plugin-module-resolver'‚Äù ‚Äî resolvido.

Crash indica problema em runtime (JS): import n√£o resolvido, JSON malformado, rota ou contexto faltante.

4) CORRE√á√ïES J√Å APLICADAS (n√£o suficientes)

Substitui√ß√£o de aliases @/ por caminhos relativos.

Instala√ß√£o de babel-plugin-module-resolver e limpeza do cache.

Assets criados e verificados.

Prebuild e limpeza do Gradle executados.

Mesmo assim, o crash ocorre, portanto √© erro de runtime JS.

5) O QUE DEVE SER FEITO (passo a passo)
A ‚Äî Diagn√≥stico imediato (prioridade m√°xima)

Reproduzir crash em ambiente de desenvolvimento.

Gerar APK de debug com logs habilitados ou rodar no emulador.

Capturar stack trace completo (erro JS/exception).

Identificar arquivo e linha causadora da exce√ß√£o (ex.: App.tsx, _layout.tsx, Home, JSON, contexto, import nativo).

Criar planilha ou lista de arquivos suspeitos para an√°lise.

B ‚Äî Corre√ß√£o do problema raiz

Corrigir imports faltantes e componentes retornando undefined.

Proteger useEffect/init com try/catch e checks.

Corrigir leitura de JSON inv√°lida ou s√≠ncrona que cause throw.

Garantir que todas as rotas do expo-router (ou stack/tab fallback) existam.

Validar todos os contexts: provider e fallback corretos.

Testar no emulador e APK debug; primeira tela deve renderizar sem crash.

C ‚Äî Entreg√°veis obrigat√≥rios

Commitar em branch fix/runtime-crash.

Checklist de mudan√ßas (arquivos alterados + resumo).

Instru√ß√µes exatas de build local (Windows) no README/INSTRUCOES_APK.md:

npm install --legacy-peer-deps
npx expo prebuild --clean --platform android
cd android
.\gradlew clean
.\gradlew assembleRelease


Entregar APK debug (com logs) e APK release (corrigido) ou confirmar que o APK local n√£o crashar√°.

6) FINALIZA√á√ÉO E TESTES

Eu vou baixar o ZIP/branch, rodar build local, instalar APK e testar: splash ‚Üí primeira tela.

Se abrir sem crash, considerar entregue.

Se crashar, envio adb logcat e espero corre√ß√£o final.

7) REGRAS DE TRABALHO

N√£o remover funcionalidades existentes.

N√£o adicionar depend√™ncias web-only.

Manter compatibilidade React Native + react-native-reanimated (Babel).

Mensagens de commit claras.

Sempre responder: resumo do que foi feito ‚Üí arquivos alterados ‚Üí pr√≥ximos passos.

8) OBSERVA√á√ïES T√âCNICAS

JSONs grandes (data/bible-acf.json) devem ser carregados com require/streaming.

Validar imports relativos ap√≥s refatora√ß√£o.

useEffect/init protegidos com try/catch.

Assets referenciados existem em assets/ e app.json aponta splash e icon corretamente.

Expo-router: compatibilidade release, fallback para @react-navigation/native se necess√°rio.